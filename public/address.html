<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="keywords" content="超值拼团,团购网">
    <meta name="description" content="超值拼团,超值拼团、超值拼团、超值拼团、团购网、团购网、团购网、团购网。">
    <meta name="author" content="lay-aui, a-ui.com">
    <title>超值拼团--地址管理</title>
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport"/>
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="black" name="apple-mobile-web-app-status-bar-style"/>
    <meta content="telephone=no" name="format-detection"/>
    <link type="text/css" rel="stylesheet" href="themes/css/base.css">
    <link type="text/css" rel="stylesheet" href="themes/css/icon.css">
    <link type="text/css" rel="stylesheet" href="themes/css/home.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link href="iTunesArtwork@2x.png" sizes="114x114" rel="apple-touch-icon-precomposed">
</head>
<body>

<section class="aui-flexView aui-flexView-address">
    <header class="aui-navBar aui-navBar-fixed b-line">
        <a href="javascript:history.back(-1)" class="aui-navBar-item">
            <i class="icon icon-return"></i>
        </a>
        <div class="aui-center">
            <span class="aui-center-title">地址管理</span>
        </div>
        <a href="add-address.html" class="aui-navBar-item">
            <i class="icon icon-sys"></i>添加
        </a>
    </header>
    <section id="address" class="aui-scrollView">

        <!--<div class="aui-Address-box">-->
        <!--<div class="aui-Address-box-item">-->
        <!--<div class="aui-Address-box-item-bd">-->
        <!--<h2>李嘉桦</h2>-->
        <!--</div>-->
        <!--<div class="aui-Address-box-item-ft">-->
        <!--<p>185****8899</p>-->
        <!--</div>-->
        <!--</div>-->
        <!--<div class="aui-Address-box-item aui-add-bottom b-line">-->
        <!--<div class="aui-Address-box-item-bd">-->
        <!--<p>北京市海淀区中关村街道学院路43号大唐电信B座801</p>-->
        <!--</div>-->
        <!--</div>-->
        <!--<div class="aui-Address-box-item">-->
        <!--<div class="aui-Address-box-item">-->
        <!--<label class="cell-right">-->
        <!--<input type="radio" value="1" name="1" checked="">-->
        <!--<i class="cell-radio-icon"></i>默认地址-->
        <!--</label>-->

        <!--</div>-->
        <!--<div class="aui-Address-box-item-ft">-->
        <!--<p><i class="icon icon-delete"></i> 删除</p>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->
        <!--<div class="aui-Address-box">-->
        <!--<div class="aui-Address-box-item">-->
        <!--<div class="aui-Address-box-item-bd">-->
        <!--<h2>李嘉桦</h2>-->
        <!--</div>-->
        <!--<div class="aui-Address-box-item-ft">-->
        <!--<p>185****8899</p>-->
        <!--</div>-->
        <!--</div>-->
        <!--<div class="aui-Address-box-item b-line">-->
        <!--<div class="aui-Address-box-item-bd">-->
        <!--<p>北京市海淀区西三环北路22号中航大厦C座209北京市海淀区西三环北路22号中航大厦C座209</p>-->
        <!--</div>-->
        <!--</div>-->
        <!--<div class="aui-Address-box-item">-->
        <!--<div class="aui-Address-box-item">-->
        <!--<label class="cell-right">-->
        <!--<input type="radio" value="0" name="1">-->
        <!--<i class="cell-radio-icon"></i>默认地址-->
        <!--</label>-->
        <!--</div>-->
        <!--<div class="aui-Address-box-item-ft">-->
        <!--<p><i class="icon icon-delete"></i>删除</p>-->
        <!--</div>-->
        <!--</div>-->
        <!--</div>-->
    </section>
</section>


<!-- 删除地址 弹窗 提示   通用弹窗 begin  -->
<div class="mask-black-dialog" style="display:none">
    <div class="m-confirm">
        <div class="confirm-hd">
            <strong class="confirm-title">标题</strong>
        </div>
        <div class="confirm-bd">确认删除该收货地址吗？</div>
        <div class="confirm-ft">
            <a href="javascript:;" class="confirm-btn default">取消</a>
            <a href="javascript:;" class="confirm-btn primary">确定</a>
        </div>
    </div>
</div>
<script type="text/javascript" src="themes/js/jquery.min.js"></script>
<script type="text/javascript" src="themes/js/slider.js"></script>
<script type="text/javascript" src="themes/js/tab.js"></script>
<script type="text/javascript">
    $(function () {
        $.post('/api/v1/address/get', {}, function (data) {
            console.log(data);
            if (data.msg == 'ok') {
                var address = '';
                data.data.map(function (value, index, array) {
                    address += '<div class="aui-Address-box"><div class="aui-Address-box-item"><div class="aui-Address-box-item-bd"> <h2>' + value.address_name + '</h2> </div> <div class="aui-Address-box-item-ft"><p>' + value.address_phone + '</p> </div> </div> <div class="aui-Address-box-item aui-add-bottom b-line"> <div class="aui-Address-box-item-bd"> <p>' + value.address + '</p></div></div><div class="aui-Address-box-item"><div class="aui-Address-box-item"> <label class="cell-right">';
                    if (value.address_status == 1) {
                        address += '<input class="input" type="radio" value="' + value.address_id + '" name="1" checked=""><i class="cell-radio-icon"></i>默认地址 </label> </div> <div class="aui-Address-box-item-ft"> <p data-id="' + value.address_id + '" class="del"><i class="icon icon-delete"></i>删除</p></div></div></div>'
                    } else {
                        address += '<input class="input" type="radio" value="' + value.address_id + '" name="1" ><i class="cell-radio-icon"></i>默认地址</label> </div> <div class="aui-Address-box-item-ft"><p class="del"  data-id="' + value.address_id + '"><i class="icon icon-delete"></i> 删除</p></div></div></div>'
                    }
                });
                $('#address').empty();
                $('#address').append(address);
            }
        }, 'json');

        $('#address').on('click', '.input', function () {
            $.post('/api/v1/address/update/default', {'id': $(this).val()}, function (data) {
            }, 'json');
        });
        $('#address').on('click', '.del', function () {
            var th = $(this);
            $.post('/api/v1/address/del', {'id': th.attr('data-id')}, function (data) {
                if (data.msg == 'ok') {
                    th.parents('.aui-Address-box').remove();
                }
            }, 'json')
        });
    });
</script>
</body>
</html>
